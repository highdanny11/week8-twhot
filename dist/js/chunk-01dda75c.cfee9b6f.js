(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-01dda75c"],{e01a:function(e,t,c){"use strict";var o=c("23e7"),a=c("83ab"),r=c("da84"),i=c("5135"),n=c("861d"),d=c("9bf2").f,l=c("e893"),s=r.Symbol;if(a&&"function"==typeof s&&(!("description"in s.prototype)||void 0!==s().description)){var u={},p=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof p?new s(e):void 0===e?s():s(e);return""===e&&(u[t]=!0),t};l(p,s);var b=p.prototype=s.prototype;b.constructor=p;var j=b.toString,O="Symbol(test)"==String(s("test")),h=/^Symbol\((.*)\)[^)]+$/;d(b,"description",{configurable:!0,get:function(){var e=n(this)?this.valueOf():this,t=j.call(e);if(i(u,e))return"";var c=O?t.slice(7,-1):t.replace(h,"$1");return""===c?void 0:c}}),o({global:!0,forced:!0},{Symbol:p})}},e7ee:function(e,t,c){"use strict";c.r(t);var o=c("7a23"),a={class:"container mt-3"},r=Object(o["createVNode"])("div",{class:"spinner-grow text-danger",role:"status"},[Object(o["createVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),i=Object(o["createVNode"])("div",{class:"spinner-grow text-warning mx-3",role:"status"},[Object(o["createVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),n=Object(o["createVNode"])("div",{class:"spinner-grow text-success",role:"status"},[Object(o["createVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),d={key:0,class:"d-flex flex-row-reverse"},l={key:1,class:"row justify-content-center"},s={class:"col"},u={class:"table align-middle"},p=Object(o["createVNode"])("thead",null,[Object(o["createVNode"])("tr",null,[Object(o["createVNode"])("th",{scope:"col",style:{width:"100px"}},"產品編號"),Object(o["createVNode"])("th",{scope:"col"},"產品名稱"),Object(o["createVNode"])("th",{scope:"col",style:{width:"80px"}},"原價"),Object(o["createVNode"])("th",{scope:"col",style:{width:"80px"}},"售價"),Object(o["createVNode"])("th",{scope:"col",style:{width:"100px"}},"是否啟用"),Object(o["createVNode"])("th",{scope:"col"},"編輯"),Object(o["createVNode"])("th",{scope:"col"},"刪除")])],-1),b={scope:"row"};function j(e,t,c,j,O,h){var m=Object(o["resolveComponent"])("Loading"),g=Object(o["resolveComponent"])("BackProduct"),f=Object(o["resolveComponent"])("Pagination"),v=Object(o["resolveComponent"])("DeletModal");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])("div",a,[Object(o["createVNode"])(m,{active:O.isLoading},{default:Object(o["withCtx"])((function(){return[r,i,n]})),_:1},8,["active"]),O.SelecteditProduct?(Object(o["openBlock"])(),Object(o["createBlock"])("div",d,[Object(o["createVNode"])("a",{href:"#",class:"btn btn-primary btn-lg mt-3",onClick:t[1]||(t[1]=Object(o["withModifiers"])((function(e){return h.edit()}),["prevent"]))},"新增")])):Object(o["createCommentVNode"])("",!0),O.SelecteditProduct?(Object(o["openBlock"])(),Object(o["createBlock"])("div",l,[Object(o["createVNode"])("div",s,[Object(o["createVNode"])("table",u,[p,Object(o["createVNode"])("tbody",null,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(O.products,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])("tr",{key:e},[Object(o["createVNode"])("th",b,[Object(o["createVNode"])("img",{src:e.imageUrl,style:{width:"200px",height:"150px","object-fit":"cover"},alt:""},null,8,["src"])]),Object(o["createVNode"])("td",null,Object(o["toDisplayString"])(e.title),1),Object(o["createVNode"])("td",null,Object(o["toDisplayString"])(e.origin_price),1),Object(o["createVNode"])("td",null,Object(o["toDisplayString"])(e.price),1),Object(o["createVNode"])("td",null,Object(o["toDisplayString"])(e.is_enabled?"啟用":"未啟用"),1),Object(o["createVNode"])("td",null,[Object(o["createVNode"])("button",{class:"btn btn-outline-primary",onClick:function(t){return h.edit(e)}}," 編輯 ",8,["onClick"])]),Object(o["createVNode"])("td",null,[Object(o["createVNode"])("button",{class:"btn btn-outline-danger",onClick:function(t){return h.openDelete(e.id)}}," 刪除 ",8,["onClick"])])])})),128))])])])])):Object(o["createCommentVNode"])("",!0)]),O.SelecteditProduct?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(g,{key:0,onDataup:h.getdata,editproduct:O.editproduct},null,8,["onDataup","editproduct"])),O.SelecteditProduct?(Object(o["openBlock"])(),Object(o["createBlock"])(f,{key:1,onUpdata:h.getdata,pagination:O.pagination},null,8,["onUpdata","pagination"])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(v,{ref:"del",onDeldata:h.getdata},null,8,["onDeldata"])],64)}var O=c("5530"),h=(c("99af"),{class:"modal fade",id:"deleteAlert",tabindex:"-1","aria-hidden":"true"}),m={class:"modal-dialog modal-dialog-centered"},g={class:"modal-content"},f=Object(o["createVNode"])("div",{class:"modal-header"},[Object(o["createVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-exclamation-circle",viewBox:"0 0 16 16"},[Object(o["createVNode"])("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),Object(o["createVNode"])("path",{d:"M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"})]),Object(o["createVNode"])("h5",{class:"modal-title ms-2",id:"exampleModalLabel"},"確定要刪除"),Object(o["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),v=Object(o["createVNode"])("div",{class:"modal-body text-danger fs-3"},"刪除後就無法復原!",-1),V={class:"modal-footer"},N=Object(o["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," Close ",-1);function y(e,t,c,a,r,i){return Object(o["openBlock"])(),Object(o["createBlock"])("div",h,[Object(o["createVNode"])("div",m,[Object(o["createVNode"])("div",g,[f,v,Object(o["createVNode"])("div",V,[N,Object(o["createVNode"])("button",{type:"button",class:"btn btn-outline-danger",onClick:t[1]||(t[1]=function(){return i.btnDelete&&i.btnDelete.apply(i,arguments)})}," 刪除 ")])])])])}var k=c("7c2b"),x=c.n(k),w={inject:["send"],data:function(){return{del:"",id:""}},methods:{btnDelete:function(){var e=this;this.$http.delete("".concat("https://vue3-course-api.hexschool.io/","api/").concat("highdanny11-hexschool","/admin/product/").concat(this.id)).then((function(t){t.data.success?(e.$emit("deldata"),e.send(t.data)):alert("刪除失敗")})),this.del.hide()},OpenDelModal:function(e){this.id=e,this.del.show()}},mounted:function(){this.del=new x.a(document.querySelector("#deleteAlert"),{keyboard:!1})}};w.render=y;var D=w,B={class:"container"},C={class:"row"},M={class:"col-6 mx-auto"},U={class:"pagination justify-content-center"},S=Object(o["createVNode"])("span",{"aria-hidden":"true"},"«",-1),_=Object(o["createVNode"])("span",{"aria-hidden":"true"},"»",-1);function L(e,t,c,a,r,i){return Object(o["openBlock"])(),Object(o["createBlock"])("div",B,[Object(o["createVNode"])("div",C,[Object(o["createVNode"])("div",M,[Object(o["createVNode"])("ul",U,[Object(o["createVNode"])("li",{class:["page-item",{disabled:!c.pagination.has_pre}]},[Object(o["createVNode"])("a",{href:"#",class:"page-link","aria-label":"Previous",onClick:t[1]||(t[1]=Object(o["withModifiers"])((function(e){return i.getdata(c.pagination.current_page-1)}),["prevent"]))},[S])],2),(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(c.pagination.total_pages,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])("li",{class:["page-item",{active:e===c.pagination.current_page}],key:t},[Object(o["createVNode"])("a",{class:"page-link",href:"#",onClick:Object(o["withModifiers"])((function(t){return i.getdata(e)}),["prevent"])},Object(o["toDisplayString"])(e),9,["onClick"])],2)})),128)),Object(o["createVNode"])("li",{class:["page-item",{disabled:!c.pagination.has_next}]},[Object(o["createVNode"])("a",{href:"#",class:"page-link","aria-label":"Next",onClick:t[2]||(t[2]=Object(o["withModifiers"])((function(e){return i.getdata(c.pagination.current_page+1)}),["prevent"]))},[_])],2)])])])])}var P={props:["pagination"],methods:{getdata:function(e){this.$emit("updata",e)}}};P.render=L;var I=P,$=(c("a4d3"),c("e01a"),{class:"container"}),T={class:"row"},z={class:"col-6 text-center py-3"},A={class:"figure"},F=Object(o["createVNode"])("figcaption",{class:"figure-caption"},"商品主圖預覽",-1),E={class:"form-group"},J=Object(o["createVNode"])("label",{for:"producstImg"},"產品相關圖片網址:",-1),R={class:"d-flex flex-row-reverse"},q={class:"col-6 py-3"},G={class:"card"},H={class:"card-header"},K={class:"card-body"},Q={class:"form-group"},W=Object(o["createVNode"])("label",{for:"producsttitle"},"產品標題:",-1),X=Object(o["createVNode"])("label",{for:"producstImg"},"圖片網址:",-1),Y={class:"row"},Z={class:"form-group col-md-6"},ee=Object(o["createVNode"])("label",{for:"category"},"類別:",-1),te={class:"form-group col-md-6"},ce=Object(o["createVNode"])("label",{for:"unit"},"單位:",-1),oe={class:"row"},ae={class:"form-group col-md-6"},re=Object(o["createVNode"])("label",{for:"origin_price"},"原價:",-1),ie={class:"form-group col-md-6"},ne=Object(o["createVNode"])("label",{for:"price"},"售價:",-1),de={class:"form-group"},le=Object(o["createVNode"])("label",{for:"producstcontent"},"產品描述:",-1),se=Object(o["createVNode"])("label",{for:"producstdescription"},"說明內容:",-1),ue={class:"d-flex justify-content-between mt-2"},pe={class:"form-check"},be={class:"form-check-label",for:"flexCheckIndeterminate"},je={class:"btn-group"},Oe=Object(o["createVNode"])("div",{class:"h3 text-center mt-4"},"產品相關圖片預覽",-1),he={class:"row"},me={class:"border border-1 mb-5"},ge={class:"figure"},fe={class:"figure-caption text-center mb-3"};function ve(e,t,c,a,r,i){return Object(o["openBlock"])(),Object(o["createBlock"])("div",$,[Object(o["createVNode"])("div",T,[Object(o["createVNode"])("div",z,[Object(o["createVNode"])("figure",A,[Object(o["createVNode"])("img",{src:r.product.imageUrl||r.presetImg,style:{height:"350px"},class:"figure-img img-fluid rounded img-thumbnail",alt:"123"},null,8,["src"])]),F,Object(o["createVNode"])("div",E,[J,Object(o["withDirectives"])(Object(o["createVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return r.imgurl=e}),type:"url",class:"form-control my-2 ",id:"producstImg"},null,512),[[o["vModelText"],r.imgurl,void 0,{trim:!0}]])]),Object(o["createVNode"])("div",R,[Object(o["createVNode"])("a",{href:"#",class:"btn btn-primary",id:"bulid",onClick:t[2]||(t[2]=Object(o["withModifiers"])((function(){return i.sentImg&&i.sentImg.apply(i,arguments)}),["prevent"]))},"增加")])]),Object(o["createVNode"])("div",q,[Object(o["createVNode"])("div",G,[Object(o["createVNode"])("div",H,Object(o["toDisplayString"])(void 0===r.product.id?"新增":"編輯")+"產品",1),Object(o["createVNode"])("div",K,[Object(o["createVNode"])("div",Q,[W,Object(o["withDirectives"])(Object(o["createVNode"])("input",{"onUpdate:modelValue":t[3]||(t[3]=function(e){return r.product.title=e}),type:"text",class:"form-control my-2",id:"producsttitle",autofocus:""},null,512),[[o["vModelText"],r.product.title]]),X,Object(o["withDirectives"])(Object(o["createVNode"])("input",{"onUpdate:modelValue":t[4]||(t[4]=function(e){return r.product.imageUrl=e}),type:"url",class:"form-control my-2 js-producstImg",id:"producstImg"},null,512),[[o["vModelText"],r.product.imageUrl,void 0,{trim:!0}]])]),Object(o["createVNode"])("div",Y,[Object(o["createVNode"])("div",Z,[ee,Object(o["withDirectives"])(Object(o["createVNode"])("input",{"onUpdate:modelValue":t[5]||(t[5]=function(e){return r.product.category=e}),type:"text",class:"form-control my-2 js-category",id:"category"},null,512),[[o["vModelText"],r.product.category]])]),Object(o["createVNode"])("div",te,[ce,Object(o["withDirectives"])(Object(o["createVNode"])("input",{"onUpdate:modelValue":t[6]||(t[6]=function(e){return r.product.unit=e}),type:"text",maxlength:"3",class:"form-control my-2 js-unit",id:"unit"},null,512),[[o["vModelText"],r.product.unit]])])]),Object(o["createVNode"])("div",oe,[Object(o["createVNode"])("div",ae,[re,Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"number","onUpdate:modelValue":t[7]||(t[7]=function(e){return r.product.price=e}),class:"form-control my-2 js-origin_price",id:"origin_price"},null,512),[[o["vModelText"],r.product.price,void 0,{number:!0}]])]),Object(o["createVNode"])("div",ie,[ne,Object(o["withDirectives"])(Object(o["createVNode"])("input",{"onUpdate:modelValue":t[8]||(t[8]=function(e){return r.product.origin_price=e}),type:"number",class:"form-control my-2 js-price",id:"price"},null,512),[[o["vModelText"],r.product.origin_price,void 0,{number:!0}]])])]),Object(o["createVNode"])("div",de,[le,Object(o["withDirectives"])(Object(o["createVNode"])("textarea",{class:"form-control my-2","onUpdate:modelValue":t[9]||(t[9]=function(e){return r.product.content=e}),placeholder:"限定20個字",style:{height:"60px"}},null,512),[[o["vModelText"],r.product.content,void 0,{trim:!0}]]),se,Object(o["withDirectives"])(Object(o["createVNode"])("textarea",{class:"form-control my-2","onUpdate:modelValue":t[10]||(t[10]=function(e){return r.product.description=e}),placeholder:"限定20個字",style:{height:"60px"}},null,512),[[o["vModelText"],r.product.description,void 0,{trim:!0}]])]),Object(o["createVNode"])("div",ue,[Object(o["createVNode"])("div",pe,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[11]||(t[11]=function(e){return r.product.is_enabled=e}),"true-value":1,"false-value":0,id:"flexCheckIndeterminate"},null,512),[[o["vModelCheckbox"],r.product.is_enabled,void 0,{number:!0}]]),Object(o["createVNode"])("label",be,Object(o["toDisplayString"])(1===r.product.is_enabled?"啟用":"未啟用"),1)]),Object(o["createVNode"])("div",je,[Object(o["createVNode"])("a",{href:"#",class:"btn btn-secondary me-2",onClick:t[12]||(t[12]=Object(o["withModifiers"])((function(e){return i.cancelEdit()}),["prevent"]))},"取消"),Object(o["createVNode"])("a",{href:"#",class:"btn btn-primary",onClick:t[13]||(t[13]=Object(o["withModifiers"])((function(e){return i.upData()}),["prevent"]))},Object(o["toDisplayString"])(void 0===r.product.id?"新增":"更新"),1)])])])])])]),Oe,Object(o["createVNode"])("div",he,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(r.product.imagesUrl,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"col-3",key:t},[Object(o["createVNode"])("div",me,[Object(o["createVNode"])("figure",ge,[Object(o["createVNode"])("img",{src:e,style:{height:"350px"},class:"figure-img img-fluid rounded img-thumbnail w-100",alt:"123"},null,8,["src"])]),Object(o["createVNode"])("figcaption",fe,[Object(o["createVNode"])("div",{class:"btn btn-danger",onClick:function(e){return i.delimagesUrl(t)}},"刪除",8,["onClick"])])])])})),128))])])}c("d81d"),c("b64b"),c("caad"),c("2532"),c("a434");var Ve={props:["editproduct"],inject:["send"],data:function(){return{presetImg:"https://fakeimg.pl/350x200/?text=Preview",product:{},imgurl:""}},methods:{isValidURL:function(e){var t=/(ftp|http|https):(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(|([\w#!:.?+=&%@!]))?/;return!!t.test(e)},sentImg:function(){!1===Object.prototype.hasOwnProperty.call(this.product,"imagesUrl")&&(this.product.imagesUrl=[]),""!==this.imgurl&&this.isValidURL(this.imgurl)?(this.product.imagesUrl.push(this.imgurl),this.imgurl=""):alert("網址不對")},putData:function(){var e=this;this.$http.put("".concat("https://vue3-course-api.hexschool.io/","api/").concat("highdanny11-hexschool","/admin/product/").concat(this.product.id),{data:this.product}).then((function(t){t.data.success?e.send(t.data):alert("更新失敗")}))},upData:function(){var e=this;if(void 0===this.product.id){var t=Object.keys(this.product).map((function(t){return e.product[t]}));t.includes("")?console.log("有欄位沒填"):this.$http.post("".concat("https://vue3-course-api.hexschool.io/","api/").concat("highdanny11-hexschool","/admin/product"),{data:this.product}).then((function(t){t.data.success?e.$emit("dataup"):console.log(t.data.success)})).catch((function(e){console.log(e)}))}else this.putData()},cancelEdit:function(){this.$emit("dataup")},delimagesUrl:function(e){this.product.imagesUrl.splice(e,1)}},mounted:function(){this.product=Object(O["a"])({},this.editproduct)}};Ve.render=ve;var Ne=Ve,ye={components:{Pagination:I,DeletModal:D,BackProduct:Ne},data:function(){return{isLoading:!1,SelecteditProduct:!0,products:{},pagination:{},editproduct:{}}},methods:{getdata:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0,this.$http.get("".concat("https://vue3-course-api.hexschool.io/","api/").concat("highdanny11-hexschool","/admin/products?page=").concat(t)).then((function(t){t.data.success?(e.isLoading=!1,e.SelecteditProduct=!0,e.products=t.data.products,e.pagination=t.data.pagination):console.log("失敗")})).catch((function(e){console.log(e)}))},edit:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.editproduct=Object(O["a"])({},e),this.SelecteditProduct=!1},closeModal:function(){this.$refs.modal.modal.hide()},openDelete:function(e){this.$refs.del.OpenDelModal(e)}},created:function(){this.getdata()}};ye.render=j;t["default"]=ye}}]);
//# sourceMappingURL=chunk-01dda75c.cfee9b6f.js.map